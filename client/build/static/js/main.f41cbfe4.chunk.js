(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){e.exports=n(79)},51:function(e,t,n){},53:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(17),c=n.n(r),o=n(2),i=n(19),u=n(13),s=function(e){return{type:"LOGIN",me:e}},m=function(e){return{type:"MOUNT_INPUT_MODAL",inputModal:e}};n(51);var d=Object(u.g)(Object(o.b)(function(e){return{me:e.me}},function(e){return{logOut:function(t){return e({type:"LOGOUT"})}}})(function(e){var t=function(t){t.preventDefault(),e.history.push("/signup")},n=function(t){t.preventDefault(),e.history.push("/signin")},a=function(t){t.preventDefault(),e.logOut()},r=function(t){t.preventDefault(),e.history.push("/")},c=function(t){t.preventDefault(),e.history.push("/user")};return l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo"},"Todo App"),l.a.createElement("div",{className:"container"},l.a.createElement("div",null,e.me.login?"Welcome, ".concat(e.me.login,"!"):"Guest"),"/"===e.location.pathname?l.a.createElement("button",{onClick:c},"Profile"):l.a.createElement("button",{onClick:r},"Home"),e.me.login?l.a.createElement("button",{onClick:a},"Logout"):"/signin"===e.location.pathname?l.a.createElement("button",{onClick:t},"Sign up"):l.a.createElement("button",{onClick:n},"Sign in")))})),p=n(20),f=(n(53),function(e){var t=e.label,n=Object(p.a)(e,["label"]);return l.a.createElement(a.Fragment,null,l.a.createElement("label",null,t),l.a.createElement("input",Object.assign({className:"input"},n)))}),v=n(6),b=n.n(v),E=function(e,t){return b.a.post("/api/auth/signin",{login:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},h=function(e,t){return b.a.post("/api/auth/signup",{login:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},g=function(){return b.a.get("/api/user",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data})},N=n(15),O=n(8),y=n(21),k=function(e,t){switch(t.type){case"update":return Object(y.a)({},e,{values:Object(y.a)({},e.values,t.payload.values?t.payload.values:{})});default:return e}},D=function(){var e=Object(a.useReducer)(k,{values:{}}),t=Object(O.a)(e,2),n=t[0],l=t[1];return{values:n.values,getValues:function(){return n.values},dispatch:l}},j=function(e,t){var n=e.defaultValue,l=Object(p.a)(e,["defaultValue"]),r=t.values[l.name]?t.values[l.name]:"";Object(a.useEffect)(function(){t.dispatch({type:"update",payload:{values:Object(N.a)({},l.name,n||r)}})},[l.name,n]);return Object(y.a)({},l,{onChange:function(e){var n;n=void 0!==e.target?e.target.value:e,t.dispatch({type:"update",payload:{values:Object(N.a)({},l.name,n)}})},value:r})};n(35);var M=function(e){var t=D(),n=j({name:"login",label:"Login",type:"login"},t),a=j({name:"password",label:"Password",type:"password"},t);return l.a.createElement("div",{className:"auth-page"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"title"},"Sign up"),l.a.createElement("form",{onSubmit:function(n){n.preventDefault();var a=t.values,l=a.login,r=a.password;h(l,r).then(function(t){200===t.status&&e.history.push("/signin")})}},l.a.createElement("div",{className:"body"},l.a.createElement(f,n),l.a.createElement(f,a)),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",type:"submit"},"Sign up"))))))};var w=Object(o.b)(null,function(e){return{logIn:function(t){return e(s(t))}}})(function(e){var t=D(),n=j({name:"login",label:"Login",type:"login"},t),a=j({name:"password",label:"Password",type:"password"},t);return l.a.createElement("div",{className:"auth-page"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"title"},"Sign in"),l.a.createElement("form",{onSubmit:function(n){n.preventDefault();var a=t.values,l=a.login,r=a.password;E(l,r).then(function(t){if(200===t.status){var n=t.data,a=n.login,l=n.token;e.logIn({login:a,token:l}),e.history.push("/")}})}},l.a.createElement("div",{className:"body"},l.a.createElement(f,n),l.a.createElement(f,a)),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",type:"submit"},"Sign in"))))))}),C=(n(71),function(e){var t=e.title,n=e.isOpen,r=e.onCancel,c=e.onSubmit,o=e.children;return l.a.createElement(a.Fragment,null,n&&l.a.createElement("div",{className:"modalOverlay"},l.a.createElement("div",{className:"modalWindow"},l.a.createElement("div",{className:"modalHeader"},l.a.createElement("div",{className:"modalTitle"},t)),l.a.createElement("div",{className:"modalBody"},o),l.a.createElement("div",{className:"modalFooter"},l.a.createElement("button",{className:"btn",onClick:r},"Cancel"),l.a.createElement("button",{className:"btn",onClick:c},"Submit")))))}),S=(n(72),function(e){var t=e.title,n=e.isOpen,r=e.children;return l.a.createElement(a.Fragment,null,n&&l.a.createElement("div",{className:"modalInputOverlay"},l.a.createElement("div",{className:"modalWindow"},l.a.createElement("div",{className:"modalHeader"},l.a.createElement("div",{className:"modalTitle"},t)),l.a.createElement("div",{className:"modalBody"},r))))}),T=function(){return b.a.get("/api/tasks",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data})},I=function(e){return b.a.post("/api/task",{title:e,date:Date.now()},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},U=function(e){return b.a.delete("/api/task/".concat(e),{headers:{"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){console.log(e)})},_=function(e,t){return b.a.put("/api/task/".concat(t),{title:e,date:Date.now()},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},L=n(41);function A(e){var t=e.unmountInputModal,n=e.editTask,r=e.id,c=e.term,o=e.updateData,i=e.data,u=D(),s=j({name:"term",label:"Enter title",defaultValue:c},u);return l.a.createElement(a.Fragment,null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u.values.term,r).then(function(e){200===e.status&&o(i.map(function(t){return t._id!==r?t:{title:u.values.term,_id:r,date:e.data.date}}))}),t()}},l.a.createElement("div",{className:"modalContent"},l.a.createElement(f,s)),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault(),t()},type:"button"},"Cancel"),l.a.createElement("button",{className:"btn",type:"submit"},"Submit"))))}function x(e){var t=e.unmountInputModal,n=e.addTask,r=e.updateData,c=e.data,o=D(),i=j({name:"term",label:"Enter title"},o);return l.a.createElement(a.Fragment,null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(o.values.term).then(function(e){200===e.status&&r([].concat(Object(L.a)(c),[e.data]))}),t()}},l.a.createElement("div",{className:"modalContent"},l.a.createElement(f,i)),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",type:"button",onClick:function(e){e.preventDefault(),t()}},"Cancel"),l.a.createElement("button",{className:"btn",type:"submit"},"Submit"))))}var P=Object(o.b)(null,function(e){return{mountModal:function(t){return e({type:"MOUNT_MODAL",modal:t})},unmountModal:function(t){return e({type:"UNMOUNT_MODAL"})},mountInputModal:function(t){return e(m(t))},unmountInputModal:function(t){return e({type:"UNMOUNT_INPUT_MODAL"})}}})(function(e){return e.data.map(function(t){var n={day:new Date(t.date).getDate(),month:new Date(t.date).getMonth()+1,year:new Date(t.date).getFullYear(),hours:new Date(t.date).getHours(),minutes:new Date(t.date).getMinutes()};for(var a in n)n[a]=n[a].toString().length>1?n[a]:"0"+n[a];return l.a.createElement("div",{className:"box",key:t._id},l.a.createElement("div",{className:"text"},t.title),l.a.createElement("div",{className:"lower-section"},l.a.createElement("div",{className:"date"},"".concat(n.day,"/").concat(n.month,"/").concat(n.year," ").concat(n.hours,":").concat(n.minutes)),l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",name:"edit",onClick:function(){return function(t,n){var a=e.mountInputModal,r=e.unmountInputModal,c=e.update,o=e.initialData;a({title:"Edit task",children:l.a.createElement(A,{id:t,term:n,unmountInputModal:r,editTask:_,updateData:c,data:o})})}(t._id,t.title)}},"Edit"),l.a.createElement("button",{className:"delete-btn",name:"delete",onClick:function(){return function(t){var n=e.mountModal,a=e.unmountModal,r=e.update,c=e.initialData;n({title:"Delete Task",onCancel:a,onSubmit:function(){U(t).then(function(e){200===e.status&&r(c.filter(function(e){return e._id!==t}))}),a()},children:l.a.createElement("p",null,"Are you sure you want to delete this task?")})}(t._id)}},"Delete"))))})});var F=Object(o.b)(null,function(e){return{mountInputModal:function(t){return e(m(t))},unmountInputModal:function(t){return e({type:"UNMOUNT_INPUT_MODAL"})}}})(function(e){var t={title:!1,date:!1},n=Object(a.useReducer)(function(n,a){var l=e.initialData,r=e.update,c=e.data,o=a.type;if(o in n){var i=n[o]?1:-1;r([].slice.call(c).sort(function(e,t){return e[o]===t[o]?0:e[o]>t[o]?i:-1*i}))}var u=n.title,s=n.date;switch(o){case"title":return{title:!u,date:s};case"date":return{title:u,date:!s};case"reset":return r(l),t;default:throw new Error}},t),r=Object(O.a)(n,2),c=(r[0],r[1]);return l.a.createElement("div",{className:"btns"},l.a.createElement("button",{className:"btn",onClick:function(){return c({type:"title"})}},"Sort by title"),l.a.createElement("button",{className:"btn",onClick:function(){return c({type:"date"})}},"Sort by date"),l.a.createElement("button",{className:"btn",onClick:function(){return c({type:"reset"})}},"Reset"),l.a.createElement("button",{className:"btn",onClick:function(){return function(){var t=e.mountInputModal,n=e.unmountInputModal,a=e.updateInitialData,r=e.initialData;t({title:"Create task",children:l.a.createElement(x,{unmountInputModal:n,addTask:I,updateData:a,data:r})})}()}},"Add"))});n(73);var W=function(e){var t=Object(a.useState)(""),n=Object(O.a)(t,2),r=n[0],c=n[1];return l.a.createElement("input",{className:"searchbar-input",value:r,type:"text",placeholder:"Search for task",onChange:function(t){var n=t.target.value.toString();if(c(n),e.data){var a=e.data.filter(function(e){return e.title.includes(n)});e.update(a)}}})};n(74);var B=Object(o.b)(function(e){return{modal:e.modal,inputModal:e.inputModal}})(function(e){var t=Object(a.useState)([]),n=Object(O.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)([]),i=Object(O.a)(o,2),u=i[0],s=i[1],m=e.modal,d=e.inputModal;return Object(a.useEffect)(function(){T().then(function(e){c(e),s(e)})},[]),Object(a.useEffect)(function(){c(u)},[u.map(function(e){return e.title}).join(",")]),u?l.a.createElement("div",{className:"task-page"},l.a.createElement("div",{className:"toolbar"},l.a.createElement(W,{data:u,update:c}),l.a.createElement(F,{data:r,update:c,initialData:u,updateInitialData:s})),l.a.createElement(P,{initialData:u,data:r,update:s}),l.a.createElement(C,{isOpen:m.isOpen,title:m.title,onCancel:m.onCancel,onSubmit:m.onSubmit},m.children),l.a.createElement(S,{isOpen:d.isOpen,title:d.title},d.children)):null});n(75);var G=function(){return l.a.createElement("div",{className:"not-found-page"},l.a.createElement("div",{className:"err"},"404 Error"),l.a.createElement("div",{className:"desc"},"Page not found"))};n(76);var R=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){g().then(function(e){r(e)})},[]),l.a.createElement("div",{className:"user-info-page"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"title"},"User info"),n?function(){var e=n.login,t=n.date;return l.a.createElement("div",{className:"body"},l.a.createElement("div",{className:"name"},l.a.createElement("span",null,"Username: ".concat(e))),l.a.createElement("div",{className:"date"},l.a.createElement("span",null,"Registration date:"),l.a.createElement("span",null,new Date(t).toString())))}():null)))};n(77);var H=Object(o.b)(function(e){return{me:e.me}},function(e){return{logIn:function(t){return e(s(t))}}})(function(e){return l.a.createElement("main",{className:"main"},l.a.createElement(u.d,null,!e.me.token&&l.a.createElement(u.a,{from:"/",to:"/signin",exact:!0}),!e.me.token&&l.a.createElement(u.a,{from:"/user",to:"/signin",exact:!0}),!e.me.token&&l.a.createElement(u.b,{path:"/signup",component:M}),!e.me.token&&l.a.createElement(u.b,{path:"/signin",component:w}),e.me.token&&l.a.createElement(u.b,{path:"/user",component:R}),e.me.token&&l.a.createElement(u.b,{path:"/",component:B}),l.a.createElement(u.b,{component:G})))});n(78);var V=function(){return l.a.createElement(a.Fragment,null,l.a.createElement(d,null),l.a.createElement(H,null))},z=n(11),J=n(38),Y=n(39),$=n(40),q=n.n($);function K(e){e?b.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete b.a.defaults.headers.common.Authorization}var Q={login:"",token:""},X={title:"",isOpen:!1,onCancel:function(){},onSubmit:function(){},children:null},Z={title:"",isOpen:!1,children:null},ee=Object(z.combineReducers)({me:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return K(t.me.token),{login:t.me.login,token:t.me.token};case"LOGOUT":return K(),{login:"",token:""};default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUNT_MODAL":var n=t.modal;return{title:n.title,onCancel:n.onCancel,onSubmit:n.onSubmit,children:n.children,isOpen:!0};case"UNMOUNT_MODAL":return{title:"",isOpen:!1,onCancel:function(){},onSubmit:function(){},children:null};default:return e}},inputModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUNT_INPUT_MODAL":var n=t.inputModal;return{title:n.title,children:n.children,isOpen:!0};case"UNMOUNT_INPUT_MODAL":return{title:"",isOpen:!1,children:null};default:return e}}}),te=[Y.a,q.a],ne=Object(z.createStore)(ee,Object(J.composeWithDevTools)(z.applyMiddleware.apply(void 0,te)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(o.a,{store:ne},l.a.createElement(i.a,null,l.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.f41cbfe4.chunk.js.map