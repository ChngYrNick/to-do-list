(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){},41:function(e,t,n){e.exports=n(78)},50:function(e,t,n){},52:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),o=n.n(l),c=n(3),i=n(17),u=n(13),s=function(e){return{type:"LOGIN",me:e}},m=function(e){return{type:"MOUNT_INPUT_MODAL",inputModal:e}};n(50);var d=Object(u.g)(Object(c.b)(function(e){return{me:e.me}},function(e){return{logOut:function(t){return e({type:"LOGOUT"})}}})(function(e){var t=function(t){t.preventDefault(),e.history.push("/signup")},n=function(t){t.preventDefault(),e.history.push("/signin")},a=function(t){t.preventDefault(),e.logOut()},l=function(t){t.preventDefault(),e.history.push("/")},o=function(t){t.preventDefault(),e.history.push("/user")};return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"logo"},"Todo App"),r.a.createElement("div",{className:"container"},r.a.createElement("div",null,e.me.login?"Welcome, ".concat(e.me.login,"!"):"Guest"),"/"===e.location.pathname?r.a.createElement("button",{onClick:o},"Profile"):r.a.createElement("button",{onClick:l},"Home"),e.me.login?r.a.createElement("button",{onClick:a},"Logout"):"/signin"===e.location.pathname?r.a.createElement("button",{onClick:t},"Sign up"):r.a.createElement("button",{onClick:n},"Sign in")))})),p=n(18),f=(n(52),function(e){var t=e.label,n=Object(p.a)(e,["label"]);return r.a.createElement(a.Fragment,null,r.a.createElement("label",null,t),r.a.createElement("input",Object.assign({className:"input"},n)))}),v=n(8),b=n.n(v),E=function(e,t){return b.a.post("/api/auth/signin",{login:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},h=function(e,t){return b.a.post("/api/auth/signup",{login:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},g=function(){return b.a.get("/api/user",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data})},O=n(10),N=n(19);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){Object(N.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e,t){switch(t.type){case"update":return j({},e,{values:j({},e.values,{},t.payload.values?t.payload.values:{})});default:return e}},w=function(){var e=Object(a.useReducer)(k,{values:{}}),t=Object(O.a)(e,2),n=t[0],r=t[1];return{values:n.values,getValues:function(){return n.values},dispatch:r}},D=function(e,t){var n=e.defaultValue,r=Object(p.a)(e,["defaultValue"]),l=t.values[r.name]?t.values[r.name]:"";Object(a.useEffect)(function(){t.dispatch({type:"update",payload:{values:Object(N.a)({},r.name,n||l)}})},[r.name,n]);return j({},r,{onChange:function(e){var n;n=void 0!==e.target?e.target.value:e,t.dispatch({type:"update",payload:{values:Object(N.a)({},r.name,n)}})},value:l})};n(34);var M=function(e){var t=w(),n=D({name:"login",label:"Login",type:"login"},t),a=D({name:"password",label:"Password",type:"password"},t);return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"title"},"Sign up"),r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var a=t.values,r=a.login,l=a.password;h(r,l).then(function(t){200===t.status&&e.history.push("/signin")})}},r.a.createElement("div",{className:"body"},r.a.createElement(f,n),r.a.createElement(f,a)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",type:"submit"},"Sign up"))))))};var C=Object(c.b)(null,function(e){return{logIn:function(t){return e(s(t))}}})(function(e){var t=w(),n=D({name:"login",label:"Login",type:"login"},t),a=D({name:"password",label:"Password",type:"password"},t);return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"title"},"Sign in"),r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var a=t.values,r=a.login,l=a.password;E(r,l).then(function(t){if(200===t.status){var n=t.data,a=n.login,r=n.token;e.logIn({login:a,token:r}),e.history.push("/")}})}},r.a.createElement("div",{className:"body"},r.a.createElement(f,n),r.a.createElement(f,a)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",type:"submit"},"Sign in"))))))}),S=(n(70),function(e){var t=e.title,n=e.isOpen,l=e.onCancel,o=e.onSubmit,c=e.children;return r.a.createElement(a.Fragment,null,n&&r.a.createElement("div",{className:"modalOverlay"},r.a.createElement("div",{className:"modalWindow"},r.a.createElement("div",{className:"modalHeader"},r.a.createElement("div",{className:"modalTitle"},t)),r.a.createElement("div",{className:"modalBody"},c),r.a.createElement("div",{className:"modalFooter"},r.a.createElement("button",{className:"btn",onClick:l},"Cancel"),r.a.createElement("button",{className:"btn",onClick:o},"Submit")))))}),T=(n(71),function(e){var t=e.title,n=e.isOpen,l=e.children;return r.a.createElement(a.Fragment,null,n&&r.a.createElement("div",{className:"modalInputOverlay"},r.a.createElement("div",{className:"modalWindow"},r.a.createElement("div",{className:"modalHeader"},r.a.createElement("div",{className:"modalTitle"},t)),r.a.createElement("div",{className:"modalBody"},l))))}),I=function(){return b.a.get("/api/tasks",{headers:{"Content-Type":"application/json"}}).then(function(e){return e.data})},U=function(e){return b.a.post("/api/task",{title:e,date:Date.now()},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},_=function(e){return b.a.delete("/api/task/".concat(e),{headers:{"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){console.log(e)})},P=function(e,t){return b.a.put("/api/task/".concat(t),{title:e,date:Date.now()},{headers:{"Content-Type":"application/json"}}).then(function(e){return e})},L=n(40);function A(e){var t=e.unmountInputModal,n=e.editTask,l=e.id,o=e.term,c=e.updateData,i=e.data,u=w(),s=D({name:"term",label:"Enter title",defaultValue:o},u);return r.a.createElement(a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(u.values.term,l).then(function(e){200===e.status&&c(i.map(function(t){return t._id!==l?t:{title:u.values.term,_id:l,date:e.data.date}}))}),t()}},r.a.createElement("div",{className:"modalContent"},r.a.createElement(f,s)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault(),t()},type:"button"},"Cancel"),r.a.createElement("button",{className:"btn",type:"submit"},"Submit"))))}function x(e){var t=e.unmountInputModal,n=e.addTask,l=e.updateData,o=e.data,c=w(),i=D({name:"term",label:"Enter title"},c);return r.a.createElement(a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(c.values.term).then(function(e){200===e.status&&l([].concat(Object(L.a)(o),[e.data]))}),t()}},r.a.createElement("div",{className:"modalContent"},r.a.createElement(f,i)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",type:"button",onClick:function(e){e.preventDefault(),t()}},"Cancel"),r.a.createElement("button",{className:"btn",type:"submit"},"Submit"))))}var F=Object(c.b)(null,function(e){return{mountModal:function(t){return e({type:"MOUNT_MODAL",modal:t})},unmountModal:function(t){return e({type:"UNMOUNT_MODAL"})},mountInputModal:function(t){return e(m(t))},unmountInputModal:function(t){return e({type:"UNMOUNT_INPUT_MODAL"})}}})(function(e){return e.data.map(function(t){var n={day:new Date(t.date).getDate(),month:new Date(t.date).getMonth()+1,year:new Date(t.date).getFullYear(),hours:new Date(t.date).getHours(),minutes:new Date(t.date).getMinutes()};for(var a in n)n[a]=n[a].toString().length>1?n[a]:"0"+n[a];return r.a.createElement("div",{className:"box",key:t._id},r.a.createElement("div",{className:"text"},t.title),r.a.createElement("div",{className:"lower-section"},r.a.createElement("div",{className:"date"},"".concat(n.day,"/").concat(n.month,"/").concat(n.year," ").concat(n.hours,":").concat(n.minutes)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",name:"edit",onClick:function(){return function(t,n){var a=e.mountInputModal,l=e.unmountInputModal,o=e.update,c=e.initialData;a({title:"Edit task",children:r.a.createElement(A,{id:t,term:n,unmountInputModal:l,editTask:P,updateData:o,data:c})})}(t._id,t.title)}},"Edit"),r.a.createElement("button",{className:"delete-btn",name:"delete",onClick:function(){return function(t){var n=e.mountModal,a=e.unmountModal,l=e.update,o=e.initialData;n({title:"Delete Task",onCancel:a,onSubmit:function(){_(t).then(function(e){200===e.status&&l(o.filter(function(e){return e._id!==t}))}),a()},children:r.a.createElement("p",null,"Are you sure you want to delete this task?")})}(t._id)}},"Delete"))))})});var W=Object(c.b)(null,function(e){return{mountInputModal:function(t){return e(m(t))},unmountInputModal:function(t){return e({type:"UNMOUNT_INPUT_MODAL"})}}})(function(e){var t={title:!1,date:!1},n=Object(a.useReducer)(function(n,a){var r=e.initialData,l=e.update,o=e.data,c=a.type;if(c in n){var i=n[c]?1:-1;l([].slice.call(o).sort(function(e,t){return e[c]===t[c]?0:e[c]>t[c]?i:-1*i}))}var u=n.title,s=n.date;switch(c){case"title":return{title:!u,date:s};case"date":return{title:u,date:!s};case"reset":return l(r),t;default:throw new Error}},t),l=Object(O.a)(n,2),o=(l[0],l[1]);return r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn",onClick:function(){return o({type:"title"})}},"Sort by title"),r.a.createElement("button",{className:"btn",onClick:function(){return o({type:"date"})}},"Sort by date"),r.a.createElement("button",{className:"btn",onClick:function(){return o({type:"reset"})}},"Reset"),r.a.createElement("button",{className:"btn",onClick:function(){return function(){var t=e.mountInputModal,n=e.unmountInputModal,a=e.updateInitialData,l=e.initialData;t({title:"Create task",children:r.a.createElement(x,{unmountInputModal:n,addTask:U,updateData:a,data:l})})}()}},"Add"))});n(72);var B=function(e){var t=Object(a.useState)(""),n=Object(O.a)(t,2),l=n[0],o=n[1];return r.a.createElement("input",{className:"searchbar-input",value:l,type:"text",placeholder:"Search for task",onChange:function(t){var n=t.target.value.toString();if(o(n),e.data){var a=e.data.filter(function(e){return e.title.includes(n)});e.update(a)}}})};n(73);var G=Object(c.b)(function(e){return{modal:e.modal,inputModal:e.inputModal}})(function(e){var t=Object(a.useState)([]),n=Object(O.a)(t,2),l=n[0],o=n[1],c=Object(a.useState)([]),i=Object(O.a)(c,2),u=i[0],s=i[1],m=e.modal,d=e.inputModal;return Object(a.useEffect)(function(){I().then(function(e){o(e),s(e)})},[]),Object(a.useEffect)(function(){o(u)},[u.map(function(e){return e.title}).join(",")]),u?r.a.createElement("div",{className:"task-page"},r.a.createElement("div",{className:"toolbar"},r.a.createElement(B,{data:u,update:o}),r.a.createElement(W,{data:l,update:o,initialData:u,updateInitialData:s})),r.a.createElement(F,{initialData:u,data:l,update:s}),r.a.createElement(S,{isOpen:m.isOpen,title:m.title,onCancel:m.onCancel,onSubmit:m.onSubmit},m.children),r.a.createElement(T,{isOpen:d.isOpen,title:d.title},d.children)):null});n(74);var R=function(){return r.a.createElement("div",{className:"not-found-page"},r.a.createElement("div",{className:"err"},"404 Error"),r.a.createElement("div",{className:"desc"},"Page not found"))};n(75);var H=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],l=t[1];return Object(a.useEffect)(function(){g().then(function(e){l(e)})},[]),r.a.createElement("div",{className:"user-info-page"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"title"},"User info"),n?function(){var e=n.login,t=n.date;return r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"name"},r.a.createElement("span",null,"Username: ".concat(e))),r.a.createElement("div",{className:"date"},r.a.createElement("span",null,"Registration date:"),r.a.createElement("span",null,new Date(t).toString())))}():null)))};n(76);var V=Object(c.b)(function(e){return{me:e.me}},function(e){return{logIn:function(t){return e(s(t))}}})(function(e){return r.a.createElement("main",{className:"main"},r.a.createElement(u.d,null,!e.me.token&&r.a.createElement(u.a,{from:"/",to:"/signin",exact:!0}),!e.me.token&&r.a.createElement(u.a,{from:"/user",to:"/signin",exact:!0}),!e.me.token&&r.a.createElement(u.b,{path:"/signup",component:M}),!e.me.token&&r.a.createElement(u.b,{path:"/signin",component:C}),e.me.token&&r.a.createElement(u.b,{path:"/user",component:H}),e.me.token&&r.a.createElement(u.b,{path:"/",component:G}),r.a.createElement(u.b,{component:R})))});n(77);var z=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(d,null),r.a.createElement(V,null))},J=n(12),Y=n(37),$=n(38),q=n(39),K=n.n(q);function Q(e){e?b.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete b.a.defaults.headers.common.Authorization}var X={login:"",token:""},Z={title:"",isOpen:!1,onCancel:function(){},onSubmit:function(){},children:null},ee={title:"",isOpen:!1,children:null},te=Object(J.combineReducers)({me:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Q(t.me.token),{login:t.me.login,token:t.me.token};case"LOGOUT":return Q(),{login:"",token:""};default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUNT_MODAL":var n=t.modal;return{title:n.title,onCancel:n.onCancel,onSubmit:n.onSubmit,children:n.children,isOpen:!0};case"UNMOUNT_MODAL":return{title:"",isOpen:!1,onCancel:function(){},onSubmit:function(){},children:null};default:return e}},inputModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUNT_INPUT_MODAL":var n=t.inputModal;return{title:n.title,children:n.children,isOpen:!0};case"UNMOUNT_INPUT_MODAL":return{title:"",isOpen:!1,children:null};default:return e}}}),ne=[$.a,K.a],ae=Object(J.createStore)(te,Object(Y.composeWithDevTools)(J.applyMiddleware.apply(void 0,ne)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,{store:ae},r.a.createElement(i.a,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.e5235c81.chunk.js.map